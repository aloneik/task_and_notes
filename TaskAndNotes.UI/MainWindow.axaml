<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:TaskAndNotes.UI.ViewModels"
        x:Class="TaskAndNotes.UI.MainWindow"
        x:Name="MainWindowRoot"
        x:DataType="vm:MainWindowViewModel"
        Width="900" Height="600"
        Title="Task &amp; Notes">
  <Design.DataContext>
    <vm:MainWindowViewModel />
  </Design.DataContext>
  <Grid RowDefinitions="Auto,*" ColumnDefinitions="*">
    <SplitView Grid.Row="1" IsPaneOpen="True" DisplayMode="Inline" OpenPaneLength="300">
      <SplitView.Pane>
        <Border Background="{DynamicResource SidebarBackgroundBrush}">
          <StackPanel>
            <StackPanel Orientation="Horizontal" Margin="8" Spacing="8">
              <Button Content="New Note" Command="{Binding NewNoteCommand}"/>
              <Button Content="Refresh" Command="{Binding RefreshNotesCommand}"/>
              <ToggleSwitch Content="Dark theme" IsChecked="{Binding IsDarkTheme}"/>
            </StackPanel>
            <TextBox Margin="8" Watermark="Search" Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <ComboBox Margin="8,0,8,8" ItemsSource="{Binding SortOptions}" SelectedIndex="{Binding SelectedSortIndex}"/>
            <ListBox ItemsSource="{Binding FilteredNotes}" SelectedItem="{Binding SelectedNote}" BorderThickness="0">
            <ListBox.ItemTemplate>
              <DataTemplate x:DataType="vm:NoteViewModel">
                <StackPanel Margin="8">
                  <TextBlock Text="{Binding Title}" FontWeight="SemiBold"/>
                  <TextBlock Text="{Binding Preview}" Classes="caption"/>
                  <TextBlock Text="{Binding UpdatedAt}" Classes="caption"/>
                </StackPanel>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
          </StackPanel>
        </Border>
      </SplitView.Pane>
      <SplitView.Content>
        <ContentControl Content="{Binding SelectedNote}"/>
      </SplitView.Content>
    </SplitView>
  </Grid>
</Window>
